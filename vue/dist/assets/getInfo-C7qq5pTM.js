import{_ as T,u as E,a as g,i as N,h as P,j as y,d as e,w as n,f as b,E as i,b as p,o as I,e as _,t as f,g as M}from"./index-CeIvZ2rJ.js";const V={class:"user-list-container"},j={class:"user-list"},U={class:"pagination"},$={__name:"getInfo",setup(D){const d=E(),u=g([]),r=g(1),l=g(15),w=g(0),m=async()=>{try{const a=await b.post("/api/legymCustomer/get_info",{manager:d.manager,pageSize:l.value,currentPage:r.value});u.value=a.data.customers,w.value=a.data.total,r.value=a.data.currentPage,l.value=a.data.pageSize}catch(a){console.error("获取用户列表失败：",a),i.error("获取用户列表失败")}};N(m);const h=a=>{l.value=a,m()},C=a=>{r.value=a,m()},z=async a=>{try{const o=await b.post("/api/legymCustomer/begin_state",{id:a.id,manager:d.manager,username:a.username});o.status===200&&(a.begin_state=o.data.begin_state,i.success(o.data.message))}catch(o){console.error("更新开始状态失败：",o),i.error("更新开始状态失败")}},k=async a=>{try{if(await M.confirm("确定要删除该用户吗？剩余乐点将返还。","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})==="confirm"){const t=await b.post("/api/legymCustomer/delete",{id:a.id,manager:d.manager,username:a.username});t.status===200&&(u.value=u.value.filter(c=>c.username!==a.username),i.success(t.data.message))}}catch(o){o!=="cancel"&&(console.error("删除用户失败：",o),i.error("删除用户失败"))}};return(a,o)=>{const t=p("el-table-column"),c=p("el-tag"),v=p("el-button"),x=p("el-table"),S=p("el-pagination");return I(),P("div",V,[y("div",j,[e(x,{data:u.value,stripe:""},{default:n(()=>[e(t,{prop:"manager",label:"管理员"}),e(t,{prop:"create_time",label:"创建时间",width:"170"}),e(t,{prop:"username",label:"用户名",width:"120"}),e(t,{prop:"password",label:"密码",width:"120"}),e(t,{prop:"schoolName",label:"学校"}),e(t,{prop:"runType",label:"跑步类型"}),e(t,{prop:"runTime",label:"跑步时间"}),e(t,{prop:"day_goals",label:"每日目标(km)"}),e(t,{prop:"day_in_week",label:"每周目标(天)"}),e(t,{prop:"complete_day_in_week",label:"已完成(天)"}),e(t,{prop:"total_goals",label:"总目标(km)"}),e(t,{prop:"complete_goals",label:"已完成(km)"}),e(t,{label:"跑步状态",width:"100"},{default:n(s=>[e(c,{type:s.row.is_run?"success":"info"},{default:n(()=>[_(f(s.row.is_run?"已完成":"未完成"),1)]),_:2},1032,["type"])]),_:1}),e(t,{label:"开始状态",width:"100"},{default:n(s=>[e(c,{type:s.row.begin_state?"success":"info"},{default:n(()=>[_(f(s.row.begin_state?"进行中":"暂停中"),1)]),_:2},1032,["type"])]),_:1}),e(t,{label:"操作",width:"150"},{default:n(s=>[e(v,{size:"small",type:s.row.begin_state?"warning":"success",onClick:B=>z(s.row)},{default:n(()=>[_(f(s.row.begin_state?"暂停":"开始"),1)]),_:2},1032,["type","onClick"]),e(v,{size:"small",type:"danger",onClick:B=>k(s.row)},{default:n(()=>o[2]||(o[2]=[_(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),y("div",U,[e(S,{"current-page":r.value,"onUpdate:currentPage":o[0]||(o[0]=s=>r.value=s),"page-size":l.value,"onUpdate:pageSize":o[1]||(o[1]=s=>l.value=s),"page-sizes":[15,30,50,100],total:w.value,onSizeChange:h,onCurrentChange:C,layout:"total, sizes, prev, pager, next, jumper"},null,8,["current-page","page-size","total"])])])])}}},q=T($,[["__scopeId","data-v-0f796265"]]);export{q as default};
