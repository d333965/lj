import{_ as T,u as E,a as g,i as N,h as I,j as v,d as e,w as n,f,E as r,b as l,o as M,e as _,t as b,g as P}from"./index-DY1_oJyb.js";const V={class:"user-list-container"},j={class:"user-list"},U={class:"pagination"},$={__name:"getInfo",setup(D){const d=E(),i=g([]),p=g(1),c=g(15),w=g(0),m=async()=>{try{const t=await f.post("/api/legymCustomer/get_info",{manager:d.manager,pageSize:c.value,currentPage:p.value});i.value=t.data.customers,w.value=t.data.total}catch(t){console.error("获取用户列表失败：",t),r.error("获取用户列表失败")}};N(m);const h=t=>{c.value=t,m()},C=t=>{p.value=t,m()},k=async t=>{try{const o=await f.post("/api/legymCustomer/begin_state",{id:t.id,manager:d.manager,username:t.username});o.status===200&&(t.begin_state=o.data.begin_state,r.success(o.data.message))}catch(o){console.error("更新开始状态失败：",o),r.error("更新开始状态失败")}},z=async t=>{try{if(await P.confirm("确定要删除该用户吗？剩余乐点将返还。","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})==="confirm"){const a=await f.post("/api/legymCustomer/delete",{id:t.id,manager:d.manager,username:t.username});a.status===200&&(i.value=i.value.filter(u=>u.username!==t.username),r.success(a.data.message))}}catch(o){o!=="cancel"&&(console.error("删除用户失败：",o),r.error("删除用户失败"))}};return(t,o)=>{const a=l("el-table-column"),u=l("el-tag"),y=l("el-button"),x=l("el-table"),S=l("el-pagination");return M(),I("div",V,[v("div",j,[e(x,{data:i.value,stripe:""},{default:n(()=>[e(a,{prop:"manager",label:"管理员"}),e(a,{prop:"create_time",label:"创建时间",width:"170"}),e(a,{prop:"username",label:"用户名",width:"120"}),e(a,{prop:"password",label:"密码",width:"120"}),e(a,{prop:"schoolName",label:"学校"}),e(a,{prop:"runType",label:"跑步类型"}),e(a,{prop:"runTime",label:"跑步时间"}),e(a,{prop:"day_goals",label:"每日目标(km)"}),e(a,{prop:"day_in_week",label:"每周目标(天)"}),e(a,{prop:"complete_day_in_week",label:"已完成(天)"}),e(a,{prop:"total_goals",label:"总目标(km)"}),e(a,{prop:"complete_goals",label:"已完成(km)"}),e(a,{label:"跑步状态",width:"100"},{default:n(s=>[e(u,{type:s.row.is_run?"success":"info"},{default:n(()=>[_(b(s.row.is_run?"已完成":"未完成"),1)]),_:2},1032,["type"])]),_:1}),e(a,{label:"开始状态",width:"100"},{default:n(s=>[e(u,{type:s.row.begin_state?"success":"info"},{default:n(()=>[_(b(s.row.begin_state?"进行中":"暂停中"),1)]),_:2},1032,["type"])]),_:1}),e(a,{label:"操作",width:"150"},{default:n(s=>[e(y,{size:"small",type:s.row.begin_state?"warning":"success",onClick:B=>k(s.row)},{default:n(()=>[_(b(s.row.begin_state?"暂停":"开始"),1)]),_:2},1032,["type","onClick"]),e(y,{size:"small",type:"danger",onClick:B=>z(s.row)},{default:n(()=>o[2]||(o[2]=[_(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),v("div",U,[e(S,{"current-page":p.value,"onUpdate:currentPage":o[0]||(o[0]=s=>p.value=s),"page-size":c.value,"onUpdate:pageSize":o[1]||(o[1]=s=>c.value=s),"page-sizes":[15,30,50,100],total:w.value,onSizeChange:h,onCurrentChange:C,layout:"total, sizes, prev, pager, next, jumper"},null,8,["current-page","page-size","total"])])])])}}},q=T($,[["__scopeId","data-v-ffd093a4"]]);export{q as default};
